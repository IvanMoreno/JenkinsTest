pipeline {
    agent any
    
    stages {
        stage('Publish') {
            steps {
                bat """
                    butler push "../${pwd()}/Build" ivanjorli/jenkins-test:windows
                """
            }
            post {
                success {
                    discordSend description: "Publish bien", footer: "Link lleva a itch.io", link: "https://ivanjorli.itch.io/jenkins-test", result: currentBuild.currentResult, title: env.JOB_NAME, webhookURL: "https://discord.com/api/webhooks/1403692153439391754/jQaX79xZrL0QqQ4PlwgmUwclwU4Fpriv1yxOowDFKiFPI8wmjoVsjeULtlC7QKFknd9a"
                }
            }
        }
    }
    post {
        failure {
            discordSend description: "Something failed", footer: "Aqu√≠ footer", link: env.BUILD_URL, result: currentBuild.currentResult, title: env.JOB_NAME, webhookURL: "https://discord.com/api/webhooks/1403692153439391754/jQaX79xZrL0QqQ4PlwgmUwclwU4Fpriv1yxOowDFKiFPI8wmjoVsjeULtlC7QKFknd9a"
        }
    }
}